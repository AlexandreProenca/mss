{% extends 'base.html' %}
{% load i18n %}

{% block sidebar %}
    {% for section in sections %}
    <li {% ifequal section.id "core" %}class="active"{% endifequal %}>
        <a href="#{{ section.id }}" data-target="{{ section.id }}">{% trans section.name %}</a>
    </li>
    {% endfor %}
    <script type="text/javascript">
        showSection = function() {
            $('#sidebar li').removeClass("active");
            $(this).parent().addClass("active");
            section = $(this).data("target");
            $.get('/mss/sections/' + section + '/')
             .success(function(content) {
                $('#section').html(content);
             })
             .error(function(xhr) {
                if (xhr.responseText && xhr.status == 500) $('body').html(xhr.responseText);
             });
        };

        $('#sidebar a').click(showSection);
    </script>
{% endblock %}

{% block content %}
{% if sections %}
    <section id="section" class="section"></section>
    <script type="text/javascript">
        $.get('{% url section "core" %}')
         .success(function(content) {
            $('#section').html(content);
         })
         .error(function(xhr) {
            if (xhr.responseText && xhr.status == 500) $('body').html(xhr.responseText);
         });
    </script>
{% else %}
    <section>
        <p class="alert alert-error">{% trans "No modules for Mandriva Server Setup installed." %}</p>
        <p class="alter">{% trans "Check for mss-modules-* packages." %}</p>
    </section>
{% endif %}
{% endblock %}

