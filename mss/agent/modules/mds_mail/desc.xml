<module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../desc.xsd" id="mds_mail">
    <name>Mail service</name>
    <desc>Complete mail service with POP/IMAP, anti-virus and anti-spam toolkits</desc>
    <actions>
        <action type="link" name="Management interface" value="https://@HOSTNAME@/mmc/main.php" />
    </actions>
    <packages>
        <target name="all">
            <rpm>postfix</rpm>
            <rpm>postfix-ldap</rpm>
            <rpm>mmc-web-mail</rpm>
            <rpm>python-mmc-mail</rpm>
            <rpm>amavisd-new</rpm>
            <rpm>spamassassin</rpm>
            <rpm>spamassassin-tools</rpm>
            <rpm>clamd</rpm>
            <rpm>dovecot</rpm>
            <rpm>dovecot-plugins-ldap</rpm>
            <rpm>dovecot-plugins-sieve</rpm>
            <rpm>dovecot-plugins-managesieve</rpm>
        </target>
    </packages>
    <conflicts>
        <module>zarafa</module>
    </conflicts>
    <deps>
        <module>mds_mmc</module>
    </deps>
    <config>
        <network name="smtpd_mynetworks" format="short" validation="network" default="get_networks">
            <label>My networks</label>
            <help>Specify which clients are authorized to send mails through the mail server without authentication.</help>
        </network>
        <options name="popimap_proto" require="yes">
            <label>Protocols supported</label>
            <help>Protocols that the dovecot server will provide.</help>
            <option value="imap imaps pop3 pop3s">IMAPS and POP3S</option>
            <option value="imaps imap">IMAPS</option>
            <option value="pop3 pop3s">POP3S</option>
        </options>
        <check name="fw_lan" default="on">
            <label>Allow mail services access from internal networks</label>
            <help>Configure the firewall to accept smtp/imap/pop3 connections
                on interfaces configured as 'internal'</help>
        </check>
        <check name="fw_wan" default="off">
            <label>Allow mail services access from external networks</label>
            <help>Configure the firewall to accept smtp/imap/pop3 connections
                on interfaces configured as 'external'</help>
        </check>
    </config>
</module>
