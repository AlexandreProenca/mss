<module id="zarafa">
    <name>Zarafa Collaboration Platform</name>
    <desc>Zarafa is a replacement for Microsoft Exchange. It features full MS Outlook compatibility, ActiveSync support and a rich webmail interface. Zarafa users and groups are managed in the MBS management interface</desc>
    <deps>
        <module>mds_mmc</module>
        <module>mysql</module>
    </deps>
    <conflicts>
        <module>mds_mail</module>
        <module>mds_webmail</module>
    </conflicts>
    <actions>
        <action type="link" name="Users and groups management" value="http://@HOSTNAME@/mmc/" />
        <action type="link" name="Zarafa webmail interface" value="http://@HOSTNAME@/webaccess/" />
    </actions>
    <market>
        <info_file title="Zarafa on MBS">zarafa.html</info_file>
        <buy_url>http://store.mandriva.com</buy_url>
    </market>
    <medias verbose_name="Zarafa" name="zarafa" auth="my" proto="https">
        <url>download.mandriva.com/EnterpriseServer5/rpms/@ARCH@/media/main/testing/</url>
    </medias>
    <packages>
        <target name="all">
            <rpm>zarafa</rpm>
            <rpm>zarafa-webaccess</rpm>
            <rpm>php-xml</rpm>
            <rpm>python-mmc-mail</rpm>
            <rpm>mmc-web-mail</rpm>
            <rpm>postfix</rpm>
            <rpm>postfix-ldap</rpm>
            <rpm>amavisd-new</rpm>
            <rpm>spamassassin</rpm>
            <rpm>spamassassin-tools</rpm>
            <rpm>clamd</rpm>
        </target>
    </packages>
    <config>
        <password name="mysql_rootpasswd" require="yes">
            <label>MySQL root password</label>
            <help>Used to create the zarafa database</help>
        </password>
        <password name="mysql_zarafapasswd" require="yes">
            <label>MySQL zarafa password</label>
            <help>MySQL user password for the zarafa database</help>
        </password>
        <text name="zarafa_attachments" require="yes" default="/home/zarafa/attachments">
            <label>Attachments directory</label>
            <help>Where do you want to store mail attachments ?</help>
        </text>
        <options name="zarafa_lang" require="yes">
            <label>Default language for Zarafa folders</label>
            <help>Create default folders for users in the selected language</help>
            <option value="C">English</option>
            <option value="fr_FR.UTF-8">Fran√ßais</option>
            <option value="de_DE.UTF-8">Deutsch</option>
        </options>
        <check name="zarafa_imap" default="on">
    	    <label>IMAP/IMAPS support</label>
            <help>Enable IMAP and IMAPS on the Zarafa server</help>
        </check>
        <check name="zarafa_ical" default="on">
    	    <label>CalDAV/iCal support</label>
            <help>Export calendars in CalDAV/iCal format for mail clients (thunderbird, evolution...)</help>
        </check>
        <check name="zarafa_zpush" default="on">
    	    <label>ActiveSync support</label>
            <help>Enable ActiveSync for mobile phones synchronisation (mail, contacts, calendars)</help>
        </check>
        <text name="smtpd_myhostname" require="yes" validation="fqdn">
            <label>My hostname</label>
            <help>The host FQDN (eg: smtp.domain.com)</help>
        </text>
        <network name="smtpd_mynetworks" format="short" validation="network">
            <label>My networks</label>
            <help>Specify which clients are authorized to send mails through the mail server. If your network address is 192.168.0.0 specify : 192.168.0.0/255.255.255.0</help>
        </network>
    </config>
    <text>Zarafa web interface is available at : http://@HOSTNAME@/webaccess/</text>
    <text>Mail module with Zarafa support is activated in the MDS interface : http://@HOSTNAME@/mmc/</text>
    <text>You can create mail domains in the MDS interface and specify mail adresses to users and groups</text>
    <text>You have to set zarafa attributes to users and groups from the MDS interface if you want them in zarafa</text>
    <text>- SSL is enabled on the smtp server</text>
    <text>- IMAP and IMAPS protocols are enabled</text>
    <text>- iCal and CalDAV protocols are enabled. You can access calendars on http://@HOSTNAME@:8080/caldav and http://@HOSTNAME@:8080/ical with your mail client, or on port 8443 over https</text>
    <text>- ActiveSync support is enabled</text>
    <text>- Networks authorized to send mail without authentication : </text>
    <text>Make sure you have enabled mail services (SMTP 25, SMTPS 465, IMAP 143, IMAPS 993, CalDAV/iCal 8080 and 8443 (SSL)) on your firewall</text>
</module>
